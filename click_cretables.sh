
echo 'create table jxwaf (timestamp DateTime,uuid String,day Date,http_request_time String,rule_category String,rule_id String,rule_var String,rule_transform Array(String),rule_operator String,rule_action  String,http_request_host String,rule_remote_ip String,rule_uri String,rule_detail String,rule_serverity String,rule_negated String,rule_match_key String,rule_match_var String,rule_match_captures String) engine = MergeTree(day,(uuid,day),8192)' | curl 'http://localhost:8123/?query=' --data-binary @-
echo "create table jxwaf_attack (timestamp DateTime,uuid  String,day Date,http_request_time String,rule_category String,rule_id String,rule_var String,rule_transform Array(String),rule_operator String,rule_action  String,http_request_host String,rule_remote_ip String,rule_uri String,rule_detail String,rule_serverity String,rule_negated String,rule_match_key String,rule_match_var String,rule_match_captures String)  ENGINE = Kafka('kafka:9092', 'jxwaf_all', 'clickhouse_jxwaf1', 'JSONEachRow')" | curl 'http://localhost:8123/?query=' --data-binary @-

echo "CREATE MATERIALIZED VIEW consumer TO jxwaf    AS SELECT * FROM jxwaf_attack" |curl 'http://localhost:8123/?query=' --data-binary @-
